---

title: GraphDataGenerator


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "nbs/00_data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="GraphDataGenerator" class="doc_header"><code>class</code> <code>GraphDataGenerator</code><a href="https://github.com/{user}/gn4pions/tree/master/gn4pions/modules/data.py#L17" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>GraphDataGenerator</code>(<strong><code>pi0_file_list</code></strong>:<code>list</code>, <strong><code>pion_file_list</code></strong>:<code>list</code>, <strong><code>cellGeo_file</code></strong>:<code>str</code>, <strong><code>batch_size</code></strong>:<code>int</code>, <strong><code>shuffle</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>num_procs</code></strong>=<em><code>32</code></em>, <strong><code>preprocess</code></strong>=<em><code>False</code></em>, <strong><code>output_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>DataGenerator class for extracting and formating data from list of root files
This data generator uses the cell_geo file to create the input graph structure</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;/usr/workspace/hip/ML4Jets/regression_images/&#39;</span>
<span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;/p/vast1/karande1/heavyIon/data/preprocessed_data/gn4pions/geo/train/&#39;</span>
<span class="n">pi0_files</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graphs.v01-45-gaa27bcb/&#39;</span><span class="o">+</span><span class="s1">&#39;*pi0*/*.root&#39;</span><span class="p">))[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span>
<span class="n">pion_files</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graphs.v01-45-gaa27bcb/&#39;</span><span class="o">+</span><span class="s1">&#39;*pion*/*.root&#39;</span><span class="p">))[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_gen</span> <span class="o">=</span> <span class="n">GraphDataGenerator</span><span class="p">(</span><span class="n">pion_file_list</span><span class="o">=</span><span class="n">pion_files</span><span class="p">,</span> 
                              <span class="n">pi0_file_list</span><span class="o">=</span><span class="n">pi0_files</span><span class="p">,</span>
                              <span class="n">cellGeo_file</span><span class="o">=</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graph_examples/cell_geo.root&#39;</span><span class="p">,</span>
                              <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
                              <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">num_procs</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
                              <span class="n">preprocess</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">output_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">)</span>

<span class="c1"># gen = data_gen.generator()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Preprocessing and saving data to /p/vast1/karande1/heavyIon/data/preprocessed_data/gn4pions/geo/train/
Proceesing file number 0
Proceesing file number 1
Proceesing file number 2
Proceesing file number 3
Proceesing file number 4
Proceesing file number 5
Proceesing file number 6
Proceesing file number 7
Proceesing file number 8
Proceesing file number 9
Finished processing 38 files
Finished processing 35 files
Finished processing 32 files
Finished processing 34 files
Finished processing 41 files
Finished processing 36 files
Finished processing 33 files
Finished processing 40 files
Finished processing 37 files
Finished processing 39 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;/p/vast1/karande1/heavyIon/data/preprocessed_data/gn4pions/geo/val/&#39;</span>
<span class="n">pi0_files</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graphs.v01-45-gaa27bcb/&#39;</span><span class="o">+</span><span class="s1">&#39;*pi0*/*.root&#39;</span><span class="p">))[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span>
<span class="n">pion_files</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graphs.v01-45-gaa27bcb/&#39;</span><span class="o">+</span><span class="s1">&#39;*pion*/*.root&#39;</span><span class="p">))[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span>
<span class="n">data_gen_test</span> <span class="o">=</span> <span class="n">GraphDataGenerator</span><span class="p">(</span><span class="n">pion_file_list</span><span class="o">=</span><span class="n">pion_files</span><span class="p">,</span> 
                                   <span class="n">pi0_file_list</span><span class="o">=</span><span class="n">pi0_files</span><span class="p">,</span>
                                   <span class="n">cellGeo_file</span><span class="o">=</span><span class="n">data_dir</span><span class="o">+</span><span class="s1">&#39;graph_examples/cell_geo.root&#39;</span><span class="p">,</span>
                                   <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
                                   <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">num_procs</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
                                   <span class="n">preprocess</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                   <span class="n">output_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Preprocessing and saving data to /p/vast1/karande1/heavyIon/data/preprocessed_data/gn4pions/geo/val/
Proceesing file number 0
Proceesing file number 1
Proceesing file number 2
Proceesing file number 3
Proceesing file number 4
Proceesing file number 5
Proceesing file number 6
Proceesing file number 7
Proceesing file number 8
Proceesing file number 9
Finished processing 16 files
Finished processing 15 files
Finished processing 18 files
Finished processing 19 files
Finished processing 10 files
Finished processing 14 files
Finished processing 13 files
Finished processing 12 files
Finished processing 17 files
Finished processing 11 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

